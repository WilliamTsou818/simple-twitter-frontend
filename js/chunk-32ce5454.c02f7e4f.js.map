{"version":3,"sources":["webpack:///./src/views/User/PrivateRoom.vue?9f92","webpack:///./src/views/User/PrivateRoom.vue?8fc4","webpack:///src/views/User/PrivateRoom.vue","webpack:///./src/views/User/PrivateRoom.vue?e939","webpack:///./src/views/User/PrivateRoom.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_l","data","key","id","User","Room","updatedAt","chats","staticRenderFns","name","mixins","components","Head","ChatList","ChatRoom","created","fetchAllRooms","dummyRooms","methods","handleNewChatSend","console","log","content","$socket","emit","userId","$store","getters","getCurrentUser","component"],"mappings":"kHAAA,W,gECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,KAAK,QAAU,MAAMP,EAAIQ,GAAIR,EAAc,YAAE,SAASS,GAAM,OAAOL,EAAG,WAAW,CAACM,IAAID,EAAKE,GAAGJ,MAAM,CAAC,KAAOE,EAAKG,KAAK,KAAOH,EAAKI,KAAK,KAAOJ,EAAKK,iBAAgB,GAAGV,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,QAAQ,QAAU,WAAWH,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQP,EAAIe,UAAU,QAC7hBC,EAAkB,G,oFC6BtB,GACEC,KAAM,cACNC,OAAQ,CAAC,EAAX,MACEC,WAAY,CACVC,KAAJ,OACIC,SAAJ,OACIC,SAAJ,QAEEC,QARF,WASItB,KAAKuB,iBAEPf,KAXF,WAYI,MAAO,CACLM,MAAO,CACb,CACQ,QAAR,EACQ,GAAR,QACQ,QAAR,EACQ,QAAR,eACQ,UAAR,2BACQ,OAAR,oCAEA,CACQ,QAAR,EACQ,GAAR,QACQ,QAAR,EACQ,QAAR,WACQ,UAAR,4BAEA,CACQ,QAAR,EACQ,GAAR,QACQ,QAAR,EACQ,QAAR,WACQ,UAAR,2BACQ,OAAR,oCAEA,CACQ,QAAR,EACQ,GAAR,UACQ,QAAR,EACQ,QAAR,MACQ,UAAR,4BAEA,CACQ,QAAR,EACQ,GAAR,UACQ,QAAR,EACQ,QAAR,SACQ,UAAR,2BACQ,OAAR,qCAKMU,WAAY,CAClB,CACQ,GAAR,GACQ,OAAR,GACQ,OAAR,GACQ,UAAR,2BACQ,UAAR,2BACQ,KAAR,CACU,GAAV,GACU,KAAV,QACU,KAAV,cAEQ,KAAR,CACU,GAAV,GACU,OACV,+DACU,KAAV,QACU,QAAV,WAGA,CACQ,GAAR,GACQ,OAAR,GACQ,OAAR,GACQ,UAAR,2BACQ,UAAR,2BACQ,KAAR,CACU,GAAV,GACU,KAAV,QACU,KAAV,aAEQ,KAAR,CACU,GAAV,GACU,OACV,6DACU,KAAV,QACU,QAAV,cAMEC,QAAS,CACP,cADJ,WACA,kLAEA,eAFA,SAGA,iCAHA,gBAGA,EAHA,EAGA,KACA,uCACA,eACA,eANA,qDAQA,KACA,eACA,gCACA,+BAEA,kBACA,gBAGA,cACA,gBACA,gBAnBA,6DAuBIC,kBAxBJ,SAwBA,GACMC,QAAQC,IAAI,oBAAqBC,GACjC7B,KAAK8B,QAAQC,KAAK,gBAAiB,CACjCC,OAAQhC,KAAKiC,OAAOC,QAAQC,eAAezB,GAC3CmB,QAAR,OC3JoW,I,wBCQhWO,EAAY,eACd,EACAtC,EACAiB,GACA,EACA,KACA,WACA,MAIa,aAAAqB,E","file":"js/chunk-32ce5454.c02f7e4f.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrivateRoom.vue?vue&type=style&index=0&id=b1298aca&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container container--chat\"},[_c('div',{staticClass:\"chat\"},[_c('div',{staticClass:\"chat__lists\"},[_c('Head',{attrs:{\"title\":\"訊息\",\"message\":\"\"}}),_vm._l((_vm.dummyRooms),function(data){return _c('ChatList',{key:data.id,attrs:{\"user\":data.User,\"room\":data.Room,\"time\":data.updatedAt}})})],2),_c('div',{staticClass:\"chat__room\"},[_c('Head',{attrs:{\"title\":\"Apple\",\"account\":\"apple\"}}),_c('ChatRoom',{attrs:{\"chats\":_vm.chats}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container container--chat\">\r\n    <div class=\"chat\">\r\n      <div class=\"chat__lists\">\r\n        <Head title=\"訊息\" message />\r\n        <ChatList\r\n          v-for=\"data in dummyRooms\"\r\n          :key=\"data.id\"\r\n          :user=\"data.User\"\r\n          :room=\"data.Room\"\r\n          :time=\"data.updatedAt\"\r\n        />\r\n      </div>\r\n      <div class=\"chat__room\">\r\n        <Head title=\"Apple\" account=\"apple\" />\r\n        <ChatRoom :chats=\"chats\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport usersAPI from '@/apis/users'\r\nimport { Toastification } from './../../utils/mixins'\r\nimport { mapState } from 'vuex'\r\n\r\nimport Head from '@/components/Head'\r\nimport ChatList from '@/components/ChatList'\r\nimport ChatRoom from '@/components/ChatRoom'\r\n\r\nexport default {\r\n  name: 'PrivateRoom',\r\n  mixins: [Toastification],\r\n  components: {\r\n    Head,\r\n    ChatList,\r\n    ChatRoom,\r\n  },\r\n  created() {\r\n    this.fetchAllRooms()\r\n  },\r\n  data() {\r\n    return {\r\n      chats: [\r\n        {\r\n          isPill: false,\r\n          id: '45678',\r\n          isSelf: false,\r\n          content: 'Hello 你最近好嗎？',\r\n          createdAt: '2021-09-11T08:51:50.000Z',\r\n          avatar: 'https://i.imgur.com/DIGOWdG.jpeg',\r\n        },\r\n        {\r\n          isPill: false,\r\n          id: '4532g',\r\n          isSelf: true,\r\n          content: '最近天氣變化大～',\r\n          createdAt: '2021-09-24T08:51:50.000Z',\r\n        },\r\n        {\r\n          isPill: false,\r\n          id: '4532U',\r\n          isSelf: false,\r\n          content: '記得多穿一點囉！',\r\n          createdAt: '2021-09-24T18:51:50.000Z',\r\n          avatar: 'https://i.imgur.com/DIGOWdG.jpeg',\r\n        },\r\n        {\r\n          isPill: false,\r\n          id: '453ww2g',\r\n          isSelf: true,\r\n          content: '好喔～',\r\n          createdAt: '2021-09-24T18:51:50.000Z',\r\n        },\r\n        {\r\n          isPill: false,\r\n          id: '422532U',\r\n          isSelf: false,\r\n          content: '我先去洗澡喔',\r\n          createdAt: '2021-09-24T18:51:50.000Z',\r\n          avatar: 'https://i.imgur.com/DIGOWdG.jpeg',\r\n        },\r\n      ],\r\n      //TODO: 不確定roomID和roomName的內容，該使用誰當path\r\n      //TODO: apiary的account有@ 待確認\r\n      dummyRooms: [\r\n        {\r\n          id: 15,\r\n          UserId: 25,\r\n          RoomId: 15,\r\n          createdAt: '2021-09-11T08:51:50.000Z',\r\n          updatedAt: '2021-09-11T08:51:50.000Z',\r\n          Room: {\r\n            id: 15,\r\n            name: '25-15',\r\n            chat: '這樣也是符合挑戰規格',\r\n          },\r\n          User: {\r\n            id: 25,\r\n            avatar:\r\n              'https://loremflickr.com/320/240/boy/?lock=30.806766147458163',\r\n            name: 'User2',\r\n            account: '@user2',\r\n          },\r\n        },\r\n        {\r\n          id: 35,\r\n          UserId: 35,\r\n          RoomId: 25,\r\n          createdAt: '2021-09-11T08:51:50.000Z',\r\n          updatedAt: '2021-09-11T08:51:50.000Z',\r\n          Room: {\r\n            id: 25,\r\n            name: '15-35',\r\n            chat: '嗯嗯 你先去吃飯吧',\r\n          },\r\n          User: {\r\n            id: 35,\r\n            avatar:\r\n              'https://loremflickr.com/320/240/girl/?lock=43.956002864159',\r\n            name: 'User3',\r\n            account: '@user3',\r\n          },\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchAllRooms() {\r\n      try {\r\n        this.isLoading = true\r\n        const { data } = await usersAPI.messages.getPrivateRoom()\r\n        this.$store.dispatch('setPrivateRooms', data)\r\n        console.log(data)\r\n        this.isLoading = false\r\n      } catch (err) {\r\n        let message = ''\r\n        if (err.response) {\r\n          console.log(err.response.data)\r\n          message = err.response.data.message\r\n        } else {\r\n          console.log(err)\r\n          message = err.message\r\n        }\r\n\r\n        this.ToastError({\r\n          title: '獲取訊息失敗！',\r\n          description: message,\r\n        })\r\n      }\r\n    },\r\n    handleNewChatSend(content) {\r\n      console.log('handleNewChatSend', content)\r\n      this.$socket.emit('publicMessage', {\r\n        userId: this.$store.getters.getCurrentUser.id,\r\n        content,\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chat {\r\n  display: flex;\r\n  &__lists {\r\n    width: 390px;\r\n    height: 100vh;\r\n    overflow-y: scroll;\r\n    border-right: 1px solid var(--blue-gray-600);\r\n    &::-webkit-scrollbar {\r\n      display: none;\r\n    }\r\n  }\r\n  &__room {\r\n    flex: 1;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrivateRoom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrivateRoom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PrivateRoom.vue?vue&type=template&id=b1298aca&scoped=true&\"\nimport script from \"./PrivateRoom.vue?vue&type=script&lang=js&\"\nexport * from \"./PrivateRoom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PrivateRoom.vue?vue&type=style&index=0&id=b1298aca&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b1298aca\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}