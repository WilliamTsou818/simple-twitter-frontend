(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36a3a930"],{"0e30":function(t,e,s){},"33eb":function(t,e,s){"use strict";s("0e30")},"4df4":function(t,e,s){"use strict";var a=s("0366"),r=s("7b0b"),n=s("9bdd"),i=s("e95a"),o=s("50c4"),c=s("8418"),l=s("9a1f"),u=s("35a1");t.exports=function(t){var e,s,p,d,m,h,_=r(t),f="function"==typeof this?this:Array,g=arguments.length,w=g>1?arguments[1]:void 0,v=void 0!==w,b=u(_),T=0;if(v&&(w=a(w,g>2?arguments[2]:void 0,2)),void 0==b||f==Array&&i(b))for(e=o(_.length),s=new f(e);e>T;T++)h=v?w(_[T],T):_[T],c(s,T,h);else for(d=l(_,b),m=d.next,s=new f;!(p=m.call(d)).done;T++)h=v?n(d,w,[p.value,T],!0):p.value,c(s,T,h);return s.length=T,s}},9787:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form__account"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form__account__input",attrs:{id:"account",name:"account",type:"text",pattern:"[a-zA-Z0-9_]+",required:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),s("div",{class:["form__account__border",{error:t.accountTip.length>0}]}),s("label",{staticClass:"form__account__label",attrs:{for:"form__account__input"}},[t._v(" 帳號 ")]),s("span",{staticClass:"form__account__tip"},[t._v(t._s(t.accountTip))]),s("span",{class:["form__account__length",{error:t.accountLength>t.accountMaxLength}]},[t._v(" "+t._s(t.accountLength)+" / "+t._s(t.accountMaxLength)+" ")])]),s("div",{staticClass:"form__name"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form__name__input",attrs:{id:"name",name:"name",type:"text",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("div",{class:["form__name__border",{error:t.nameTip.length>0}]}),s("label",{staticClass:"form__name__label",attrs:{for:"form__name__input"}},[t._v(" 名稱 ")]),s("span",{staticClass:"form__name__tip"},[t._v(t._s(t.nameTip))]),s("span",{class:["form__name__length",{error:t.nameLength>t.nameMaxLength}]},[t._v(" "+t._s(t.nameLength)+" / "+t._s(t.nameMaxLength)+" ")])]),s("div",{staticClass:"form__email"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form__email__input",attrs:{id:"email",name:"email",type:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("div",{class:["form__email__border",{error:t.emailTip.length>0}]}),s("label",{staticClass:"form__email__label",attrs:{for:"form__email__input"}},[t._v(" Email ")]),s("span",{staticClass:"form__email__tip"},[t._v(t._s(t.emailTip))])]),s("div",{staticClass:"form__password"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form__password__input",attrs:{id:"password",name:"password",type:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("div",{class:["form__password__border",{error:t.passwordTip.length>0}]}),s("label",{staticClass:"form__password__label",attrs:{for:"form__password__input"}},[t._v(" 密碼 ")]),s("span",{staticClass:"form__password__tip"},[t._v(t._s(t.passwordTip))]),s("span",{class:["form__password__length",{error:t.passwordLength>t.passwordMaxLength}]},[t._v(" "+t._s(t.passwordLength)+" / "+t._s(t.passwordMaxLength)+" ")])]),s("div",{staticClass:"form__checkPassword"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],staticClass:"form__checkPassword__input",attrs:{id:"checkPassword",name:"checkPassword",type:"password",required:""},domProps:{value:t.checkPassword},on:{input:function(e){e.target.composing||(t.checkPassword=e.target.value)}}}),s("div",{class:["form__checkPassword__border",{error:t.checkPasswordTip.length>0}]}),s("label",{staticClass:"form__checkPassword__label",attrs:{for:"form__checkPassword__input"}},[t._v(" 密碼確認 ")]),s("span",{staticClass:"form__checkPassword__tip"},[t._v(t._s(t.checkPasswordTip))])]),"UserRegister"===t.$route.name?[s("button",{staticClass:"form__submit",attrs:{type:"submit"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isProcessing,expression:"!isProcessing"}]},[t._v("註冊")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isProcessing,expression:"isProcessing"}],staticClass:"form__submit__spinner"})]),s("router-link",{staticClass:"form__cancel-link",attrs:{to:"/user/login"}},[t._v(" 取消 ")])]:s("div",{staticClass:"form__submit__wrapper"},[s("button",{staticClass:"form__submit form__submit--setting",attrs:{type:"submit"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isProcessing,expression:"!isProcessing"}]},[t._v("儲存")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isProcessing,expression:"isProcessing"}],staticClass:"form__submit__spinner"})])])],2)},r=[],n=s("1da1");function i(t){if(Array.isArray(t))return t}s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");function o(t,e){var s=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var a,r,n=[],i=!0,o=!1;try{for(s=s.call(t);!(i=(a=s.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(c){o=!0,r=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(o)throw r}}return n}}s("fb6a"),s("b0c0"),s("a630");function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}function l(t,e){if(t){if("string"===typeof t)return c(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?c(t,e):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){return i(t)||o(t,e)||l(t,e)||u()}function d(t,e){var s="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=l(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,o=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){o=!0,n=t},f:function(){try{i||null==s["return"]||s["return"]()}finally{if(o)throw n}}}}s("96cf"),s("ac1f"),s("1276"),s("159b"),s("caad"),s("2532");var m=s("4cce"),h=s("2708"),_={name:"AccountForm",mixins:[h["a"]],props:{page:{type:String,default:"signUp"},initAccount:{type:String,default:""},initName:{type:String,default:""},initEmail:{type:String,default:""}},data:function(){return{account:this.initAccount,name:this.initName,email:this.initEmail,password:"",checkPassword:"",accountMaxLength:50,nameMaxLength:50,passwordMinLength:4,passwordMaxLength:50,isProcessing:!1,regex:/^[a-zA-Z0-9_-]+$/,accountTip:"",nameTip:"",emailTip:"",passwordTip:"",checkPasswordTip:""}},computed:{accountLength:function(){return this.account.length},nameLength:function(){return this.name.length},passwordLength:function(){return this.password.length}},watch:{account:function(){this.account?this.account.length>this.accountMaxLength?this.accountTip="帳號上限 ".concat(this.accountMaxLength," 字"):this.regex.test(this.account)?this.accountTip="":this.accountTip="帳號只能為英文、數字與_ ":this.accountTip="請填寫帳號"},name:function(){this.name?this.name.length>this.nameMaxLength?this.nameTip="名稱上限 ".concat(this.nameMaxLength," 字"):this.nameTip="":this.nameTip="請填寫名稱"},email:function(){this.email?this.emailTip="":this.emailTip="請填寫Email"},password:function(){this.password?this.password.length>this.passwordMaxLength?this.passwordTip="密碼上限 ".concat(this.passwordMaxLength," 字"):this.password.length<this.passwordMinLength?this.passwordTip="密碼至少 ".concat(this.passwordMinLength," 個字"):this.passwordTip="":this.passwordTip="請填寫密碼",this.checkPassword.length>0&&(this.checkPasswordTip=this.password!==this.checkPassword?"密碼輸入不一致":"")},checkPassword:function(){this.checkPassword?this.password!==this.checkPassword?this.checkPasswordTip="密碼輸入不一致":this.checkPasswordTip="":this.checkPasswordTip="請填寫密碼確認"}},methods:{formValidation:function(){return!(this.accountTip.length>0||this.nameTip.length>0||this.emailTip.length>0||this.passwordTip.length>0||this.checkPasswordTip.length>0)||(this.ToastError({title:"請正確填寫所有資料"}),!1)},handleSubmit:function(t){if(this.formValidation()){this.accountTip="",this.nameTip="",this.emailTip="",this.passwordTip="",this.checkPasswordTip="",this.isProcessing=!0;var e,s=new FormData(t.target),a={},r=d(s.entries());try{for(r.s();!(e=r.n()).done;){var n=p(e.value,2),i=n[0],o=n[1];a[i]=o}}catch(c){r.e(c)}finally{r.f()}"signUp"===this.page?this.handleSignUpSubmit(a):"setting"===this.page&&this.handleSettingSubmit(a)}},handleSignUpSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,m["a"].signUp(t);case 4:if(a=s.sent,r=a.data,"success"===r.status){s.next=8;break}throw new Error(r.message);case 8:e.ToastSuccess({title:"帳號註冊成功！",description:r.message}),e.$router.push({name:"UserLogin"}),s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](0),e.isProcessing=!1,s.t0.response?e.handleError(s.t0.response.data):(console.log(s.t0),e.ToastError({title:"帳號註冊失敗！",description:s.t0.message}));case 16:case"end":return s.stop()}}),s,null,[[0,12]])})))()},handleSettingSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,r,n,i,o,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,m["a"].setting({userId:e.$store.getters.getCurrentUser.id,requestData:t});case 4:if(a=s.sent,r=a.data,"success"===r.status){s.next=8;break}throw new Error(r.message);case 8:e.isProcessing=!1,n=r.user,i=n.account,o=n.name,c=n.email,e.$store.commit("setCurrentUser",{account:i,name:o,email:c}),e.ToastSuccess({title:"帳戶設定成功！",description:r.message}),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),e.isProcessing=!1,s.t0.response?e.handleError(s.t0.response.data):(console.log(s.t0),e.ToastError({title:"帳戶設定失敗！",description:s.t0.message}));case 18:case"end":return s.stop()}}),s,null,[[0,14]])})))()},handleError:function(t){var e=this,s="signUp"===this.page?"帳號註冊失敗！":"帳戶設定失敗！";if("UserSingnUpError"===t.errType||"PutUserFormatError"===t.errType){var a=t.message.split("|");a.forEach((function(t){t.includes("account cannot be blank")?e.accountTip+="請填寫帳號 ":t.includes("account should not exceed")?e.accountTip+="帳號上限 50 字 ":t.includes("account should only include")?e.accountTip+="帳號只能為英文、數字與_ ":t.includes("name cannot be blank")?e.nameTip+="請填寫名稱 ":t.includes("name should not exceed")?e.nameTip+="名稱上限 50 字 ":t.includes("email cannot be blank")?e.emailTip+="請填寫Email ":t.includes("Email must be a valid email")?e.emailTip+="請填寫正確的Email ":t.includes("password cannot be blank")?e.passwordTip+="請填寫密碼 ":t.includes("password should not exceed")?e.passwordTip+="密碼上限 50 字 ":t.includes("at least 4 characters")?e.passwordTip+="密碼至少 4 個字 ":t.includes("is not equal to checkPassword")&&(e.checkPasswordTip+="密碼輸入不一致 "),e.ToastError({title:s,description:t})}))}else{switch(t.errType){case"AccountExistsError":this.accountTip="帳號已被使用";break;case"NameExistsError":this.nameTip="名稱已被使用";break;case"EmailExistsError":this.emailTip="Email已被使用";break;default:break}this.ToastError({title:s,description:t.message})}}}},f=_,g=(s("33eb"),s("2877")),w=Object(g["a"])(f,a,r,!1,null,"aad6ff76",null);e["a"]=w.exports},"9bdd":function(t,e,s){var a=s("825a"),r=s("2a62");t.exports=function(t,e,s,n){try{return n?e(a(s)[0],s[1]):e(s)}catch(i){r(t,"throw",i)}}},a630:function(t,e,s){var a=s("23e7"),r=s("4df4"),n=s("1c7e"),i=!n((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:i},{from:r})},d28b:function(t,e,s){var a=s("746f");a("iterator")},fb6a:function(t,e,s){"use strict";var a=s("23e7"),r=s("861d"),n=s("e8b5"),i=s("23cb"),o=s("50c4"),c=s("fc6a"),l=s("8418"),u=s("b622"),p=s("1dde"),d=p("slice"),m=u("species"),h=[].slice,_=Math.max;a({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var s,a,u,p=c(this),d=o(p.length),f=i(t,d),g=i(void 0===e?d:e,d);if(n(p)&&(s=p.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?r(s)&&(s=s[m],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return h.call(p,f,g);for(a=new(void 0===s?Array:s)(_(g-f,0)),u=0;f<g;f++,u++)f in p&&l(a,u,p[f]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-36a3a930.7b02a532.js.map