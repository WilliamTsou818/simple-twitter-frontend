(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f143c21"],{"0a81":function(t,e,n){"use strict";n("a6fb")},"107c":function(t,e,n){var s=n("d039"),a=n("da84"),r=a.RegExp;t.exports=s((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1276:function(t,e,n){"use strict";var s=n("d784"),a=n("44e7"),r=n("825a"),i=n("1d80"),o=n("4840"),c=n("8aa5"),l=n("50c4"),u=n("577e"),p=n("14c3"),d=n("9263"),f=n("9f7f"),h=n("d039"),g=f.UNSUPPORTED_Y,v=[].push,x=Math.min,_=4294967295,m=!h((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));s("split",(function(t,e,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=u(i(this)),r=void 0===n?_:n>>>0;if(0===r)return[];if(void 0===t)return[s];if(!a(t))return e.call(s,t,r);var o,c,l,p=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,g=new RegExp(t.source,f+"g");while(o=d.call(g,s)){if(c=g.lastIndex,c>h&&(p.push(s.slice(h,o.index)),o.length>1&&o.index<s.length&&v.apply(p,o.slice(1)),l=o[0].length,h=c,p.length>=r))break;g.lastIndex===o.index&&g.lastIndex++}return h===s.length?!l&&g.test("")||p.push(""):p.push(s.slice(h)),p.length>r?p.slice(0,r):p}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var a=i(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,a,n):s.call(u(a),e,n)},function(t,a){var i=r(this),d=u(t),f=n(s,i,d,a,s!==e);if(f.done)return f.value;var h=o(i,RegExp),v=i.unicode,m=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(g?"g":"y"),w=new h(g?"^(?:"+i.source+")":i,m),b=void 0===a?_:a>>>0;if(0===b)return[];if(0===d.length)return null===p(w,d)?[d]:[];var T=0,E=0,y=[];while(E<d.length){w.lastIndex=g?0:E;var I,R=p(w,g?d.slice(E):d);if(null===R||(I=x(l(w.lastIndex+(g?E:0)),d.length))===T)E=c(d,E,v);else{if(y.push(d.slice(T,E)),y.length===b)return y;for(var k=1;k<=R.length-1;k++)if(y.push(R[k]),y.length===b)return y;E=T=I}}return y.push(d.slice(T)),y}]}),!m,g)},"14c3":function(t,e,n){var s=n("c6b6"),a=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var r=n.call(t,e);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==s(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},2818:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("LoginForm",{attrs:{title:t.title,path:t.path}}),n("section",{staticClass:"section-actions"},[n("router-link",{staticClass:"section-actions__link",attrs:{to:"/user/register"}},[t._v(" 註冊 Alphitter ")]),n("span",{staticClass:"section-actions__dot"},[t._v("·")]),n("router-link",{staticClass:"section-actions__link",attrs:{to:"/admin/login"}},[t._v(" 後台登入 ")])],1)],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:n("e347"),alt:"logo"}})])}],r=n("61b1"),i={name:"UserLogin",components:{LoginForm:r["a"]},data:function(){return{title:"登入 Alphitter",path:{name:"User"}}}},o=i,c=(n("74e8"),n("2877")),l=Object(c["a"])(o,s,a,!1,null,"75723660",null);e["default"]=l.exports},"61b1":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"form__title"},[t._v(t._s(t.title))]),n("div",{staticClass:"form__account"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form__account__input",attrs:{id:"account",name:"account",type:"text",pattern:"[a-zA-Z0-9_]+",required:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),n("div",{class:["form__account__border",{error:t.accountTip.length>0}]}),n("label",{staticClass:"form__account__label",attrs:{for:"form__account__input"}},[t._v(" 帳號 ")]),n("span",{staticClass:"form__account__tip"},[t._v(t._s(t.accountTip))])]),n("div",{staticClass:"form__password"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form__password__input",attrs:{id:"password",name:"password",type:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("div",{class:["form__password__border",{error:t.passwordTip.length>0}]}),n("label",{staticClass:"form__password__label",attrs:{for:"form__password__input"}},[t._v(" 密碼 ")]),n("span",{staticClass:"form__password__tip"},[t._v(t._s(t.passwordTip))])]),n("button",{staticClass:"form__submit",attrs:{type:"submit"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isProcessing,expression:"!isProcessing"}]},[t._v("登入")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isProcessing,expression:"isProcessing"}],staticClass:"form__submit__spinner"})])])},a=[],r=n("1da1"),i=(n("ac1f"),n("1276"),n("159b"),n("caad"),n("2532"),n("96cf"),n("2fa3")),o={signIn:function(t){var e=t.account,n=t.password,s=t.role;return i["b"].post("/".concat(s,"/signin"),{account:e,password:n})}},c={name:"LoginForm",props:{role:{type:String,default:"users"},title:{type:String,default:""},path:{type:Object,required:!0}},data:function(){return{isProcessing:!1,account:"",password:"",accountMaxLength:50,passwordMinLength:4,passwordMaxLength:50,regex:/^[a-zA-Z0-9_-]+$/,accountTip:"",passwordTip:""}},watch:{account:function(){this.account?this.account.length>this.accountMaxLength?this.accountTip="帳號上限 ".concat(this.accountMaxLength," 字"):this.regex.test(this.account)?this.accountTip="":this.accountTip="帳號只能為英文、數字與_ ":this.accountTip="請填寫帳號"},password:function(){this.password?this.password.length>this.passwordMaxLength?this.passwordTip="密碼上限 ".concat(this.passwordMaxLength," 字"):this.password.length<this.passwordMinLength?this.passwordTip="密碼至少 ".concat(this.passwordMinLength," 個字"):this.passwordTip="":this.passwordTip="請填寫密碼"}},methods:{formValidation:function(){return!(this.accountTip.length>0||this.passwordTip.length>0)||(i["a"].fire({icon:"warning",title:"請正確填寫帳號和密碼"}),!1)},handleSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.formValidation()){e.next=3;break}return e.abrupt("return");case 3:return t.accountTip="",t.passwordTip="",t.isProcessing=!0,e.next=8,o.signIn({account:t.account,password:t.password,role:t.role});case 8:if(n=e.sent,s=n.data,"success"===s.status){e.next=12;break}throw new Error(s.message);case 12:localStorage.setItem("token",s.token),t.$router.push(t.path),e.next=22;break;case 16:e.prev=16,e.t0=e["catch"](0),t.isProcessing=!1,a="",e.t0.response?(t.handleError(e.t0.response.data),a=e.t0.response.data.message):(console.log(e.t0),a=e.t0.message),i["a"].fire({icon:"warning",title:"登入失敗！\n ".concat(a)});case 22:case"end":return e.stop()}}),e,null,[[0,16]])})))()},handleError:function(t){var e=this;if("UserSingInFormatError"===t.errType){var n=t.message.split("|");n.forEach((function(t){t.includes("account cannot be blank")?e.accountTip+="請填寫帳號 ":t.includes("account should not exceed")?e.accountTip+="帳號上限 50 字 ":t.includes("account should only include")?e.accountTip+="帳號只能為英文、數字與_ ":t.includes("password cannot be blank")?e.passwordTip+="請填寫密碼 ":t.includes("password should not exceed")?e.passwordTip+="密碼上限 50 字 ":t.includes("at least 4 characters")&&(e.passwordTip+="密碼至少 4 個字 ")}))}else switch(t.errType){case"UserSingInError":case"UserSingInRoleError":this.accountTip="帳號不存在";break;case"UserSingInPasswordError":this.passwordTip="密碼輸入錯誤";break;default:break}}}},l=c,u=(n("0a81"),n("2877")),p=Object(u["a"])(l,s,a,!1,null,"603cbc0c",null);e["a"]=p.exports},"74e8":function(t,e,n){"use strict";n("87f8")},"87f8":function(t,e,n){},"8aa5":function(t,e,n){"use strict";var s=n("6547").charAt;t.exports=function(t,e,n){return e+(n?s(t,e).length:1)}},9263:function(t,e,n){"use strict";var s=n("577e"),a=n("ad6d"),r=n("9f7f"),i=n("5692"),o=n("7c73"),c=n("69f3").get,l=n("fce3"),u=n("107c"),p=RegExp.prototype.exec,d=i("native-string-replace",String.prototype.replace),f=p,h=function(){var t=/a/,e=/b*/g;return p.call(t,"a"),p.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),g=r.UNSUPPORTED_Y||r.BROKEN_CARET,v=void 0!==/()??/.exec("")[1],x=h||v||g||l||u;x&&(f=function(t){var e,n,r,i,l,u,x,_=this,m=c(_),w=s(t),b=m.raw;if(b)return b.lastIndex=_.lastIndex,e=f.call(b,w),_.lastIndex=b.lastIndex,e;var T=m.groups,E=g&&_.sticky,y=a.call(_),I=_.source,R=0,k=w;if(E&&(y=y.replace("y",""),-1===y.indexOf("g")&&(y+="g"),k=w.slice(_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==w.charAt(_.lastIndex-1))&&(I="(?: "+I+")",k=" "+k,R++),n=new RegExp("^(?:"+I+")",y)),v&&(n=new RegExp("^"+I+"$(?!\\s)",y)),h&&(r=_.lastIndex),i=p.call(E?n:_,k),E?i?(i.input=i.input.slice(R),i[0]=i[0].slice(R),i.index=_.lastIndex,_.lastIndex+=i[0].length):_.lastIndex=0:h&&i&&(_.lastIndex=_.global?i.index+i[0].length:r),v&&i&&i.length>1&&d.call(i[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(i[l]=void 0)})),i&&T)for(i.groups=u=o(null),l=0;l<T.length;l++)x=T[l],u[x[0]]=i[x[1]];return i}),t.exports=f},"9f7f":function(t,e,n){var s=n("d039"),a=n("da84"),r=a.RegExp;e.UNSUPPORTED_Y=s((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=s((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a6fb:function(t,e,n){},ac1f:function(t,e,n){"use strict";var s=n("23e7"),a=n("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,n){"use strict";var s=n("825a");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d784:function(t,e,n){"use strict";n("ac1f");var s=n("6eeb"),a=n("9263"),r=n("d039"),i=n("b622"),o=n("9112"),c=i("species"),l=RegExp.prototype;t.exports=function(t,e,n,u){var p=i(t),d=!r((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),f=d&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!d||!f||n){var h=/./[p],g=e(p,""[t],(function(t,e,n,s,r){var i=e.exec;return i===a||i===l.exec?d&&!r?{done:!0,value:h.call(e,n,s)}:{done:!0,value:t.call(n,e,s)}:{done:!1}}));s(String.prototype,t,g[0]),s(l,p,g[1])}u&&o(l[p],"sham",!0)}},e347:function(t,e,n){t.exports=n.p+"img/logo.daa01464.svg"},fce3:function(t,e,n){var s=n("d039"),a=n("da84"),r=a.RegExp;t.exports=s((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-2f143c21.a743e19e.js.map